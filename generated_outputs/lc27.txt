def countSmaller(nums):
    """
    Given an integer array nums, return an integer array counts where counts[i] is the number of smaller elements to the right of nums[i].
    
    Args:
    nums (List[int]): The input integer array.
    
    Returns:
    List[int]: The output integer array counts.
    """
    n = len(nums)
    ans = [0] * n
    nums2 = [0] * n

    for i in range(n-1, -1, -1):
        n = nums.pop()
        lpos = bisect_left(nums2, n)
        ans[i] = lpos
        nums2.insert(lpos, n)

    return ans
